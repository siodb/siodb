# Siodb SQL Tests

You must run those tests successfully in your environment before creating a pull request.

## Configure the test

You may modify the test behavior with the following environment variables:

- `SIODB_PATH` (default `build/debug/bin`): The directory of the Siodb executables you want to test.
- `SIODB_INSTANCE` (default `siodb`): The local instance name you want to test.
- `SIOTEST_KEEP_INSTANCE_UP` (default `0`): `1` will keep the instance up and skip the cleaning.
- `SIOTEST_TRACE` (default `0`): `1` will enable bash traces (`set -x`).

## Execute test

```bash
cd siodb
./tests/sql/run.sh
```

## Troubleshooting

If the test fails (it does not return 0) and by default, the instance is killed.
The log files, data files are kept at their location specified by the configuration file.

### Coredump

If the program fails, then a coredump should be generated by the OS.
If it is not the case, check that you have correctly configured the coredump behavior:

- On [Ubuntu](https://askubuntu.com/questions/966407/where-do-i-find-the-core-dump-in-ubuntu-16-04lts/1181036#1181036)
- On [CentOS](https://www.thegeekdiary.com/how-to-enable-core-dump-for-applications-on-centos-rhel)
